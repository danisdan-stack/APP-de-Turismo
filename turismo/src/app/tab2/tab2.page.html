<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>Mis Favoritos 💖</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <!-- ✅ ESTADO DE CARGA -->
  <div *ngIf="cargando" class="loading-state">
    <ion-spinner name="crescent"></ion-spinner>
    <p>Cargando tus favoritos...</p>
  </div>

  <!-- ✅ LISTA VACÍA -->
  <div *ngIf="!cargando && misFavoritos.length === 0" class="empty-state">
    <ion-icon name="heart-outline" size="large"></ion-icon>
    <h3>No tienes favoritos aún</h3>
    <p>Explora el mapa y guarda tus lugares favoritos</p>
    <ion-button routerLink="/mapa" fill="solid" color="primary">
      <ion-icon name="map-outline" slot="start"></ion-icon>
      Explorar Mapa
    </ion-button>
  </div>

  <!-- ✅ LISTA DE FAVORITOS -->
  <div *ngIf="!cargando && misFavoritos.length > 0" class="list-container">
    <h4 class="list-title">Lista de favoritos:</h4>
    <ion-list>
      <ion-item *ngFor="let favorito of misFavoritos">
        <ion-label>
          <h2>{{ favorito.nombre_lugar }}</h2>
          <p>{{ favorito.categoria }} • {{ favorito.provincia }}</p>
          <p class="fecha">
            Guardado: {{ favorito.fechaCreacion?.toDate() | date:'medium' }}
          </p>
        </ion-label>
        
        <ion-buttons slot="end">
          <!-- ✅ BOTÓN PARA IR AL MAPA -->
          <ion-button fill="clear" (click)="verEnMapa(favorito)">
            <ion-icon name="navigate-outline" color="primary"></ion-icon>
          </ion-button>
          
          <!-- ✅ NUEVO BOTÓN ELIMINAR -->
          <ion-button fill="clear" (click)="eliminarFavorito(favorito)" color="danger">
            <ion-icon name="trash-outline"></ion-icon>
          </ion-button>
        </ion-buttons>
      </ion-item>
    </ion-list>
  </div>
</ion-content>

<!-- 🔹 NAVEGACIÓN DE TABS EN LA PARTE INFERIOR -->
  <ion-tab-bar slot="bottom" class="tabs-navigation">
    <ion-tab-button tab="tab1" (click)="irATab1()">
      <ion-icon name="home-outline"></ion-icon>
      <ion-label>Inicio</ion-label>
    </ion-tab-button>
    
    <ion-tab-button tab="tab2" (click)="irATab2()">
      <ion-icon name="heart"></ion-icon>
      <ion-label>Favoritos</ion-label>
    </ion-tab-button>
    
    <ion-tab-button tab="tab3" (click)="irATab3()" class="tab-active">
      <ion-icon name="person-outline"></ion-icon>
      <ion-label>Mi Cuenta</ion-label>
    </ion-tab-button>
  </ion-tab-bar>